  # This is a basic workflow that is manually/push triggered
  
  name: Selenium rooms3 tests

  # Controls when the action will run. Workflow runs when manually triggered using the UI
  # or API.
  on:
    push:
      branches:
        - 'main'
  # This workflow_dispatch only stays here just for manually start this action
    workflow_dispatch:

  # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
  permissions:
    contents: read
    pages: write
    id-token: write

  # Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
  # However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
  concurrency:
    group: "pages"
    cancel-in-progress: false

  env:
    BUILD_PATH: "." # default value when not using subfolders
  # BUILD_PATH: subfolder

  # A workflow run is made up of one or more jobs that can run sequentially or in parallel
  jobs:
    run_tests_windows:
    # This workflow contains a single job called "run_tests_windows"
      # The type of runner that the job will run on
      runs-on:  windows-latest

      # Steps represent a sequence of tasks that will be executed as part of the job
      steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'
          cache: 'pip' # caching pip dependencies
          
      - name: Install Dependencies
        run: pip install -r requirements.txt
      
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Run flow create
        run: python UserCases/flow_create.py

      - name: Run publishing test
        run: python UserCases/publishing_test.py

      - name: Run room fill test
        run: python UserCases/room_fill_test.py

      - name: Run search bar test
        run: python UserCases/searchbar_test.py

      - name: Run sidebar temp test
        run: python UserCases/sidebar_temp_test.py

      - name: Run subway temp test
        run: python UserCases/subway_temp_test.py

      - name: Run subway two temp test
        run: python UserCases/subwaytwo_temp_test.py

      - name: Run task tests
        run: python UserCases/task_tests.py

      - name: Run tiles temp test
        run: python UserCases/tiles_temp_test.py

      - name: Run view test
        run: python UserCases/view_test.py

      - name: upload artifact
        uses: actions/upload-pages-artifact@v1
        with: 
          path: './artifacts'
      # - name: Send artifact to ZenHub
      #   run: |
      #     curl -X POST \
      #       -H "Content-Type: application/json" \
      #       -H "Authorization: Bearer ${{ secrets.ZENHUB_API_KEY }}" \
      #       --data "{ \"query\": \"mutation { sendToZenHub(artifactInfo: { descriptor: \\\"GitHub Actions Artifact\\\" }) }\" }" \
      #       https://api.zenhub.com/public/graphql

      # - name: deploy to Github Pages
      #   uses: actions/deploy-pages@v2
      #   with:
      #     token: ${{ secrets.GITHUB_TOKEN }}
      #   id: deployment
    run_tests_ubuntu:
        # This workflow contains a single job called "run_tests_ubuntu"
          # The type of runner that the job will run on
          runs-on:  ubuntu-latest

          # Steps represent a sequence of tasks that will be executed as part of the job
          steps:
          - name: Checkout code
            uses: actions/checkout@v3
            
          - name: Set up Python
            uses: actions/setup-python@v4
            with:
              python-version: '3.x'
              cache: 'pip' # caching pip dependencies

          - name: Install Chrome stable package
            run: sudo wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb

          - name: Install google-chrome
            run: sudo dpkg -i google-chrome-stable_current_amd64.deb  

          - name: Install Dependencies
            run: pip install -r requirements.txt

          - name: Checkout code
            uses: actions/checkout@v3

          - name: Run flow create
            run: python UserCases/flow_create.py
            
          - name: Run publishing test
            run: python UserCases/publishing_test.py

          - name: Run room fill test
            run: python UserCases/room_fill_test.py

          - name: Run search bar test
            run: python UserCases/searchbar_test.py

          - name: Run sidebar temp test
            run: python UserCases/sidebar_temp_test.py

          - name: Run subway temp test
            run: python UserCases/subway_temp_test.py

          - name: Run subway two temp test
            run: python UserCases/subwaytwo_temp_test.py

          - name: Run task tests
            run: python UserCases/task_tests.py

          - name: Run tiles temp test
            run: python UserCases/tiles_temp_test.py

          - name: Run view test
            run: python UserCases/view_test.py

          - name: upload artifact
            uses: actions/upload-pages-artifact@v1
            with: 
              path: './artifacts'
         